WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:03.509
我已经读取了一张黑脉金斑蝶的图像

00:00:03.509 --> 00:00:06.585
我想将这张图像分成几个部分

00:00:06.585 --> 00:00:11.190
把绿色的背景和黑橙色的蝴蝶分开来

00:00:11.189 --> 00:00:13.472
要进行 k 均值分割

00:00:13.473 --> 00:00:16.140
我要重点处理一种有辨识度的特征

00:00:16.140 --> 00:00:17.964
即每个像素的颜色

00:00:17.964 --> 00:00:20.574
我要重塑这张图像

00:00:20.574 --> 00:00:23.714
使其变成一个二维数组 以便输入 k 均值算法

00:00:23.714 --> 00:00:25.995
这样的数组维数应该是 m 乘 3

00:00:25.995 --> 00:00:30.359
m 指像素数 3 则指颜色通道的数目

00:00:30.359 --> 00:00:33.409
我还要将这些值转为浮点型

00:00:33.409 --> 00:00:36.778
这些都是为 k 均值聚类做的数据准备

00:00:36.779 --> 00:00:40.710
因为 OpenCV 的函数 kmeans 需要这类数据

00:00:40.710 --> 00:00:42.509
要应用 k 均值

00:00:42.509 --> 00:00:45.449
就用函数 cv2.kmeans

00:00:45.450 --> 00:00:49.515
该函数需要输入的参数有我们刚创建的 m 乘 3 像素值数组、

00:00:49.515 --> 00:00:52.814
k 值 这里初始设为 2

00:00:52.814 --> 00:00:54.629
还有我们想要的标签

00:00:54.630 --> 00:00:56.100
但这里不需要 所以写 none

00:00:56.100 --> 00:00:57.615
还有终止标准

00:00:57.615 --> 00:00:59.070
这也是要定义的

00:00:59.070 --> 00:01:01.859
然后是迭代次数

00:01:01.859 --> 00:01:04.759
最后是初始中心点的选择方式 这里设为随机选择

00:01:04.759 --> 00:01:07.650
我们先回来看标准

00:01:07.650 --> 00:01:10.855
我要在调用这个函数之前定义它

00:01:10.855 --> 00:01:13.685
标准会告诉算法何时应终止

00:01:13.685 --> 00:01:19.424
这里我要用 ε 值或迭代最大次数来定义标准

00:01:19.424 --> 00:01:24.060
迭代最大次数设为 10 而 ε 这个值我们曾略略提过

00:01:24.060 --> 00:01:28.500
也就是在经过几次迭代后 若簇移动的范围小于该值

00:01:28.500 --> 00:01:31.620
则算法终止 实现了收敛

00:01:31.620 --> 00:01:33.540
现在我先为 k 选一个较小的值

00:01:33.540 --> 00:01:36.515
因为这样运算的时间比较短

00:01:36.515 --> 00:01:38.954
k 等于 2

00:01:38.954 --> 00:01:42.939
应该会以图像最普遍的两种颜色生成一个二值图像

00:01:42.939 --> 00:01:45.840
然后 k 均值会生成一个输出

00:01:45.840 --> 00:01:51.295
也就是簇标签和中心点 因为这是个二值图像 所以簇标签为 0 和 1

00:01:51.295 --> 00:01:53.655
接下来 将结果呈现出来

00:01:53.655 --> 00:01:55.195
要显示分割情况

00:01:55.194 --> 00:01:58.879
就需要将数据重新转成一张 8 bit 的图像

00:01:58.879 --> 00:02:03.989
还要重塑分割好的数据 使其变回图像副本原本的形状

00:02:03.989 --> 00:02:09.365
现在我就能跟绘制其它图像一样将分割好的图像绘制出来了

00:02:09.365 --> 00:02:12.159
只需等一会 你就能看到这张图像

00:02:12.159 --> 00:02:15.424
被分解成了两个大相径庭的部分了

00:02:15.425 --> 00:02:20.135
一簇是橙色值 另一簇则是深墨绿色的背景

00:02:20.134 --> 00:02:22.944
实际上我可以把簇标签可视化

00:02:22.944 --> 00:02:26.044
只需将他们逐一呈现 就像用掩膜一样

00:02:26.044 --> 00:02:28.964
来看等于 1 的标签

00:02:28.965 --> 00:02:33.870
我们可以看到 1 簇包含了彩色蝴蝶和花朵的像素

00:02:33.870 --> 00:02:35.715
这就是橙色簇

00:02:35.715 --> 00:02:41.319
我甚至还可以利用这些信息来对这部分图像进行掩膜处理

00:02:41.319 --> 00:02:45.329
你可以看到我遮住了这整个部分

00:02:45.330 --> 00:02:50.080
现在我们回到 k 均值的步骤里 在这上面 这次不让 k 等于 2 了

00:02:50.080 --> 00:02:56.030
把 k 改成 6 再次运行代码

00:02:56.030 --> 00:03:01.219
这次运算的时间长了些 但现在你可以看到六种不同的颜色分块了

00:03:01.219 --> 00:03:02.629
这是较亮的橙色 是蝴蝶的翅膀

00:03:02.629 --> 00:03:07.218
还有花朵的颜色 以及不同绿色的背景

00:03:07.218 --> 00:03:11.219
对于这几个部分 我可以进行任意操作 如掩膜

00:03:11.219 --> 00:03:15.530
或只对蝴蝶翅膀或背景进行一些分析

00:03:15.530 --> 00:03:18.000
由此可见 分割这个工具十分强大.
最新课程跟课件还有一对一辅导请加wx：udacity6

